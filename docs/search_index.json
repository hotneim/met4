[["index.html", "MET4 - Empiriske Metoder Innledning", " MET4 - Empiriske Metoder H√•kon Otneim og Geir Drage Berentsen Innledning Velkommen til hjemmesiden for kurset MET4 - Empiriske metoder, som er et obligatorisk kurs p√• Bachelorprogrammet i √òkonomi og Administrasjon ved Norges Handelsh√∏yskole. Her vil du finne undervisningsmaterialet ‚Ä¶ Videobasert. Innledning til kurset, detaljer om datoer, hvordan jobbe, hvor finne informasjon, f√∏lge med p√• Canvas osv. "],["introduksjon-til-r.html", " 1 Introduksjon til R", " 1 Introduksjon til R Vi skal i dette kurset bruke programmeringsspr√•ket R til √• gj√∏re beregninger og gjennomf√∏re de ulike statistiske analysene som vi skal l√¶re etter hvert. Dette vil v√¶re nytt for mange. Vi skal f√∏rst og fremst skal skrive kode og kommandolinjer for √• f√• ut resultater i R, noe som kan oppleves uvant siden vi ellers er vant med √• klikke oss frem i et menysystem n√•r vi jobber med ulike programmer. Tr√∏sten kan v√¶re at ferdigheter i programmering blir stadig viktigere i mange yrker, spesielt innen √∏konomifaget. Vi m√• installere to ting p√• maskinen v√•r f√∏r vi g√•r videre; selve programeringsspr√•ket R, samt programmet RStudio som vi skal bruke til √• skrive og kj√∏re koden. Begge deler er gratis, og begge deler fungerer fint p√• b√•de Windows og Mac (og Linux!). Det er greiest √• gj√∏re dette i riktig rekkef√∏lge: G√• til r-project.org for √• laste ned R til ditt operativsystem, og installer p√• vanlig m√•te uten √• forandre p√• foresl√•tte innstillinger. G√• til rstudio.com, og naviger deg frem til siden for RStudio. Du skal der laste ned desktop-versjonen av programmet (‚ÄúOpen source edition‚Äù) for ditt operativsystem og installere p√• vanlig m√•te. Det er heller ikke her n√∏dvendig √• forandre p√• de foresl√•tte innstillingene. Du kan s√• √•pne RStudio, og f√∏lge sekvensen av videoforelesniger som f√∏lger under. Merk at disse videoene er l√•nt fra seminaret BAN420 - Introduction to R som gis p√• masterprogrammet ved NHH. De er derfor spilt inn p√• engelsk. Det resterende videomaterialet i kurset gis p√• norsk. "],["en-gjennomgang-av-rstudio.html", "1.1 En gjennomgang av RStudio", " 1.1 En gjennomgang av RStudio I denne videoen √•pner vi opp Rstudio og rusler gjennom det grafiske grensesnittet. "],["enkle-beregninger-og-variabler.html", "1.2 Enkle beregninger og variabler", " 1.2 Enkle beregninger og variabler Vi g√•r videre og skriver v√•re f√∏rste kommandoer i R. Det er kritisk at vi allerede n√• setter i gang med √• f√• programmeringen inn i fingrene, og det gj√∏res best ved √• skrive inn kodelinjene slik det gj√∏res i videoen, og passe p√• at du f√•r ut de samme resultatene. N√•r du er ferdig med det kan du pr√∏ve deg p√• f√∏lgende lille oppgave: Oppgave: Velg dine tre favorittall og lagre dem i tre forskjellige variabler. Beregn s√• ditt magiske tall, som er summen av favorittallene dine. Lagre ditt magiske tall i en ny variabel, og gi denne variabelen et informativt navn som identifiserer hva det er. Fikk du det til? Kikk p√• l√∏sningen under for √• sjekke. L√∏sning tall1 &lt;- 1 tall2 &lt;- 87 tall3 &lt;- 101 magisk_tall &lt;- tall1 + tall2 + tall3 "],["vektorer.html", "1.3 Vektorer", " 1.3 Vektorer Vi introduserer begrepet vektorer som er sv√¶rt viktig i statistikk generel og R spesielt. En vektor er ganske enkelt en samling med tall, og n√•r vi senere begynner √• jobbe med data kommer vi til √• lagre observasjoner av ulikt slag i vektorer. Vi ser ogs√• at vi kan gj√∏re operasjoner p√• vektorer ved √• bruke funksjoner. For eksempel bruker vi sum()-funksjonen til √• regne ut summen av alle tallene som er lagret i en vektor. Oppgave: Beregn maksimum- og minimumsverdien av vector1, samt medianen, ved √• bruke funksjoner i R. (Hint: en d√•rlig skjult hemmelighet i anvendt programmering er at dersom vi ikke vet navnet p√• funksjonen vi skal bruke, s√• er Google v√•r‚Äô beste venn!) L√∏sning # Relevante Google-s√∏k: &quot;minimum value r&quot;, &quot;maximum r&quot;, &quot;median r&quot; min(vector1) max(vector1) median(vector1) "],["pakker.html", "1.4 Pakker", " 1.4 Pakker Vi l√¶rer at n√•r vi laster ned R s√• f√∏lger det med et grunnleggende sett av funksjoner (‚Äúbase R‚Äù), men at det finnes et stort antall tilleggspakker. Vi kan enkelt laste ned og installere disse pakkene ved √• skrive kommandoen install.packages(&quot;pakkenavn&quot;). Det trenger vi bare gj√∏re en gang p√• datamaskinen v√•r. For √• bruke pakken m√• vi skrive kommandoen library(pakkenavn), og det m√• vi gj√∏re hver gang i restarter R. Oppgave: Installer f√∏lgende pakker, som vi kommer til √• bruke senere i kurset: ggplot2 dplyr stargazer L√∏sning install.packages(&quot;ggplot2&quot;) install.packages(&quot;dplyr&quot;) install.packages(&quot;stargazer&quot;) "],["mappesti.html", "1.5 Mappesti", " 1.5 Mappesti Vi kommer til √• forholde oss til filer p√• flere m√•ter. Vi skal lese inn datafiler, og vi kommer til √• produsere ulike former for output, slik som figurer og tabeller. Vi m√• da ha kontroll p√• hva R bruker som gjeldende mappesti (‚Äúworking directory‚Äù) der filer som skal leses inn ligger, og der ulike output-filer havner. Vi kan bruke funksjonen getwd() til √• sjekke hva som er gjeldende mappesti. For √• forandre mappestien kan vi bruke menysystemet (Session -&gt; Set Working Directory -&gt; Choose Directory), eventuelt funksjonen setwd() med √∏nsket mappesti som argument. Oppgave: Pass p√• at du har gjort f√∏lgende f√∏r du g√•r videre til neste leksjon: Du har laget en dedikert mappe p√• datamaskinen din der du skal samle alt materiale som vi bruker i dette kapitlet. Du har lastet ned filen testdata.xls og lagt den i den nye mappen din. Du har endret gjeldende mappesti til denne mappen. Du har bekreftet at gjeldende mappesti n√• er korrekt. "],["innlesing-av-data.html", "1.6 Innlesing av data", " 1.6 Innlesing av data Vi leser inn tabellen i excelfilen som en tabell (‚Äúdata frame‚Äù) i R ved hjelp av funksjonen read_xls() i readxl-pakken og ser p√• noen enkle kommandoer for √• jobbe med en slik tabell. Oppgave: Hvor mange kolonner har datasettet v√•rt? Kan du finne en m√•te √• skrive ut en vektor som inneholder summen av X1- og X2-kolonnene i datasettet? (Alts√•, vi vil vite summen av de to f√∏rste elementene i X1 og X2, summen av de to andre elementene, osv.) Hva er summen av alle tallene i X1- og X2-kolonnene itestdata? L√∏sning # 1 ncol(testdata) # 2 testdata$X1 + testdata$X2 # 3 sum(testdata$X1 + testdata$X2) "],["statistiske-analyser.html", "1.7 Statistiske analyser", " 1.7 Statistiske analyser Den f√∏rste kommentaren i denne videoen er selvsagt ikke sann for MET4. For oss er det motsatt: Det er ikke R som er poenget med kurset, men de statistiske metodene som vi skal l√¶re. R er bare verkt√∏yet vi skal bruke. Vi ser p√• et eksempel der vi kj√∏rer en enkel statistisk analyse (en \\(t\\)-test) p√• datasettet v√•rt, og hvordan vi kan gj√∏re ulike valg ved √• endre argumenter i funksjonskallet. Vi bruker ogs√• hjelpefilene til √• lese mer om funksjonen vi bruker. Oppgave: Hva er verdien av testobservatoren i testen som vi gjorde i denne videoen? Hint: Bruk hjelpefilene til t.test()-funksjonen. L√∏sning test_result$statistic "],["plotting.html", "1.8 Plotting", " 1.8 Plotting Vi lager v√•r f√∏rste figur i R ved √• bruke den innebygde plot()-funksjonen. Vi g√•r s√• over til √• se hvordan vi kan lage det samme plottet ved √• bruke ggplot-pakken, som er det vi kommer til √• bruke til √• lage figurer i dette kurset. Vi ser ogs√• hvordan vi kan g√• frem for √• lagre plottet som en pdf-fil i arbeidsmappen v√•r. Oppgave: Klarer du, for eksempel ved √• s√∏ke etter relevante ggplot-kommandoer p√• nettet, √• f√• prikkene i plottet til √• bli st√∏rre, og samtidig gj√∏re dem bl√•? L√∏sning ggplot(testdata, aes(x = X1, y = X2)) + geom_point(colour = &quot;blue&quot;, size = 5) "],["script.html", "1.9 Script", " 1.9 Script I stedet for √• skrive kommandoene rett inn i konsollen, hopper vi n√• over til teksteditoren i RStudio og lager et script i stedet. Her kan vi samle alle kommandoene v√•re i en fil, som vi kan lagre og kj√∏re igjen senere. Vi ser ogs√• hvordan vi enkelt kan kj√∏re enkeltlinjer i scriptet v√•rt i R-konsollen ved hjelp av Ctrl-Enter (Command-Enter p√• Mac). Vi ser at vi kan skrive kommentarer i scriptene v√•re ved √• bruke `#-tegnet, som kan v√¶re nyttig for √• holde oversikten. Til slutt lagrer vi scripet i arbeidsmappen. Oppgave: Pass p√• at du n√• har lagret scriptet som en .R-fil i mappen som vi laget for denne R-leksjonen. Lukk RStudio. Naviger s√• til denne mappen i filutforskeren og dobbelklikk p√• skriptet. Forh√•pentligvis √•pnes RStudio n√• (Hvis ikke, eller hvis filen √•pnes i det som heter R GUI, h√∏yreklikker du p√• filen og velger ‚Äú√Öpne i‚Äù, og deretter RStudio. Du kan ogs√• gjerne sette RStudio som standarsprogram for .R-filer). Finn ut hva gjeldende arbeidsmappe n√• er i RStudio. Hva skjedde n√•? Hvorfor er dette nyttig? L√∏sning N√•r vi √•pner RStudio ved √• dobbeltklikke p√• skriptfilen, s√• blir arbeidsstien satt automastisk til mappen der skriptfilen ligger. Dette er veldig nyttig n√•r vil kommer tilbake og skal jobbe videre med prosjektet v√•rt. "],["oppsummering-og-ekstra-oppgaver.html", "1.10 Oppsummering og ekstra oppgaver", " 1.10 Oppsummering og ekstra oppgaver I denne modulen har vi g√•tt gjennom noen helt grunnleggende funksjoner i R. Du har l√¶rt at R er navner p√• et programmeringsspr√•k, RStudio er navnet p√• et program der vi kan skrive og kj√∏re R-kode, og identifisert fire forskjellige vindu i RStudio: konsollen (der R-koden kj√∏res), teksteditoren (der vi skriver script), samt to vinduer der vi kan se en oversikt over hva som er i dataminnet og f√• opp plott og figurer som vi lager. Videre har du kj√∏rt noen enkle kommandoer, lagret tall og vektorer ved hjelp av variabelnavn, pr√∏vd ut noen innebygde R-funksjoner for √• regne ut f.eks. gjennomsnitt og standardavvik av tallvektorer, laget et spredningsplott, l√¶rt hva et working directory (arbeidsmappe) er, og installert R-pakker, f.eks readxl som vi brukte den til √• lese inn et lite datasett i R. Til slutt har du kj√∏rt en \\(t\\)-test, og skrevet et script (et lite program om du vil) der vi har lagret flere av kommandoene over i en tekstfil. Dersom du har fulgt modulen selv har du n√• kanskje skrevet et lite script i tekstvinduet som ser ut omtrent som koden under. N√•r du har gjort alt riktig, skal du n√• kunne kj√∏re gjennom disse kodelinjene uten feilmeldinger ved hjelp av Ctrl-Enter. Dette er helt grunnleggende (Sp√∏r om hjelp! Gi hjelp!). Har du problemer her, s√∏rg for √• f√• dem ordnet. Sp√∏r f√∏rst en medstudent om hjelp, og deretter eventuelt studentassistent eller foreleser. Studenter som har god erfaring med data og/eller programmering, kan l√¶re mye av √• hjelpe medstudenter l√∏se feilmeldinger. # Introduksjon til R # ------------------- # Laster inn n√∏dvendige pakker library(readxl) library(ggplot2) # Laster inn datasettet testdata &lt;- read_xls(&quot;testdata.xls&quot;) # Gj√∏r t-testen til sp√∏rsm√•l F i den f√∏rste data√∏vingen testresultat &lt;- t.test(testdata$X1, testdata$X2, var.equal = TRUE, alternative = &quot;two.sided&quot;) # Skriver ut resultatet av denne t-testen testresultat # Lager et plott av variabelen X1 mot X2 p &lt;- ggplot(testdata, aes(x = X1, y = X2)) + geom_point() # Lagrer plottet ggsave(&quot;testplot.pdf&quot;, plot = p) Lagre scriptet ditt. I RStudio velger du File -&gt; Save og trykker Ok dersom det kommer opp et vindu om character encoding e.l. Finn en fornuftig plassering (gjerne i samme mappe som √∏velsesdatasettet) og gi filen et fornuftig navn. Standard filending for R-script er .R, men det er skjult for de fleste Windowsbrukere. Lukk RStudio. Du kan n√• √•pne skriptfilen i RStudio igjen. Enten ved √• dobbeltklikke p√• den, eller ved √• √•pne RStudio, velge File -&gt; Open file, og s√• videre (dersom skriptet ikke allerede ligger √•pnet). Du kan ogs√• √•pne skriptfilen i en hvilken som helst notatbok (Notebook e.l.) og se at det er en helt standard, ren tekstfil. Hva er fordelen med √• lagre en analyse som et skript versus √• gj√∏re ting i et menydrevet grafisk grensesnitt? L√∏sning N√•r vi lagrer koden v√•r i et skript s√∏rger vi for at hele analysen v√•r er lagret, ikke bare resultatene. Med andre ord, dersom du p√• et senere tidspunkt √∏nsker √• komme tilbake til et analyseprosjekt og gj√∏re noen enkle forandringer, s√• er det fort gjort √• gj√∏re det i skriptet, og s√• kj√∏re hele analysen p√• nytt. Dersom du i stedet hadde brukt et menydrevet system for √• gjennomf√∏re analysen (pek og klikk) kunne du risikere √• m√•tte gj√∏re alt sammen p√• nytt (hvis du da husker hvordan du gjorde det), fordi du ikke like enkelt kan lagre hvert eneste museklikk. Vi skal n√• pynte p√• plottet og gj√∏re det riktig pent. Det gj√∏r vi ved √• legge til nye linjer i ggplot-kommandoen. Erstatt den nest siste linjen i skriptet med kommandoen under, og se at du f√•r en figur omtrent som den som f√∏lger under det igjen (vi bruker aksetitler i henhold til oppgavene i den f√∏rste datalabben, der vi f√•r vite at datasettet representerer kvalitet p√• kaffeavlingen f√∏r og etter en omlegging i produksjonsmetode): ggplot(testdata, aes(x = X1, y = X2)) + geom_point(size = 2) + xlab(&quot;Produksjonsmetode 1&quot;) + ylab(&quot;Produksjonsmetode 2&quot;) + theme_classic() Merk at vi pruker ‚Äú+‚Äù-tegnet til √• legge til flere ‚Äúlag‚Äù med grafiske egenskaper til plottet. Hvert ‚Äúlag‚Äù best√•r av en funksjon, som ofte kan ta argumenter; f.eks. brukes funksjonen geom_point() til √• lage prikker, og s√• kan vi f.eks. bruke argumentet size til √• styre st√∏rrelsen p√• prikkene. Kan du finne ut hva hvert enkelt av disse ‚Äúlagene‚Äù gj√∏r? Hint: ta bort en linje av gangen, og se hva som skjer. Pass p√• at det er et pluss mellom hvert lag. Pr√∏v √• endre p√• noen av lagene eller legg til nye. For eksempel kan du lage en tittel ved √• legge til funksjonen ggtitle() som et lag, og du kan endre aksetitlene. Pr√∏v ogs√• √• bruke argumentet shape i geom_point() til √• bytte ut prikkene med en annen form. Det finnes flere andre ‚Äútema‚Äù i tillegg til theme_classic(), f.eks. theme_bw(), theme_dark(), etc. Forslag Pr√∏v for eksempel dette: ggplot(testdata, aes(x = X1, y = X2)) + geom_point(size = 2, shape = 4) + ggtitle(&quot;Produksjonskvalitet&quot;) + xlab(&quot;Ny aksetittel&quot;) + ylab(&quot;Enda en aksetittel&quot;) + theme_light() Det f√∏lger med omfattende dokumentasjon med R. Du kan lese om alle R-funksjoner ved √• skrive ? f√∏r funksjonsnavnet i konsollen. Pr√∏v for eksempel √• skrive ?mean i konsollen og trykk enter. "],["grunnleggende-statistikk.html", " 2 Grunnleggende statistikk", " 2 Grunnleggende statistikk I denne modulen introduserer vi en del grunnleggende statistiske begreper. Mye vil oppleves som repetisjon, mens noe vil v√¶re nytt. Noe er veldig praktisk ved at vi kan bruke det direkte i eksempler, mens andre ting er mer teoretisk av natur. Felles for det vi skal se p√• her er at vi kommer til √• bruke mange av begrepene vi l√¶rer senere i kurset. "],["deskriptiv-statistikk.html", "2.1 Deskriptiv statistikk", " 2.1 Deskriptiv statistikk 2.1.1 Videoforelesninger 2.1.2 Kommentarer Deskriptiv statistikk handler ikke om analyse eller regning, men om √• presentere kompleks informasjon p√• en effektiv m√•te. Det er alts√• noe ganske annet enn det vi ellers snakker om i kurset, men det er likevel et av de nyttigste l√¶ringspunktet vi har. Hvem kan ikke regne med √• m√•tte presentere tall og resultater i l√∏pet av sin karriere? Eller selge inn forslag og planer for overordnede i h√•p om √• bli lyttet til? Det kan v√¶re direkte avgj√∏rende for din egen gjennomslagskraft at du er i stand til √• produsere overbevisende tabeller og figurer i slike situasjoner, og det er det dette temaet handler om. I l√¶reboken er det kapitlene 2‚Äì4 som behandler deskriptiv statistikk, men det er veldig Excel-fokusert, som ikke er s√• relevant for oss. Det er likevel ikke dumt √• lese gjennom stoffet for √• se hva det g√•r i, og legg spesielt merke til f√∏lgende punkter: Ulike datatyper i avsnitt 2-1. 3-4: The art and science of graphical presentations. Hva er det som gj√∏r en grafisk illustrasjon god? Pr√∏v √• ta inn over dere all informasjonen som vi lett kan lese ut av bildet p√• side 75 om Napoleons felttog mot Moskva. Her presenteres informasjon om tid, antall, geografi og temperatur p√• en helt eksepsjonelt effektiv m√•te! Videre er det noen grelle eksempler p√• hvordan vi kan bruke grafiske virkemidler til √• gi skjeve fremstillinger. I videoforelesningen gir vi flere eksempler p√• dette. Kapittel 4 g√•r litt mer i dypden om numeriske deskriptive teknikker, som gjennomsnitt, median, standardavvik, korrelasjon, osv. Dette skal v√¶re dekket greit i forelesningen, men boken g√•r litt mer i dybden. Det kan v√¶re en fin √∏velse √• kikke p√• eksemplene i l√¶reboken og fors√∏ke √• gjenskape noen av Excel-figurene i R. Se p√• eksempel 3.2, der man skal lage to histogrammer over historiske avkastninger for to ulike investeringsstrategier. Vi leser inn datasettet (last ned fra Canvas) som under og kikker p√• det: library(readxl) returns &lt;- read_xlsx(&quot;Xm03-02.xlsx&quot;) returns ## # A tibble: 50 x 2 ## `Return A` `Return B` ## &lt;dbl&gt; &lt;dbl&gt; ## 1 30 30.3 ## 2 -2.13 -30.4 ## 3 4.3 -5.61 ## 4 25 29 ## 5 12.9 -26.0 ## 6 -20.2 0.46 ## 7 1.2 2.07 ## 8 -2.59 29.4 ## 9 33 11 ## 10 14.3 -25.9 ## # ‚Ä¶ with 40 more rows Hver stategi har sin kolonne. Merk at variabelnavnene har mellomrom i seg, noe som er upraktisk n√•r vi jobber med et seri√∏st programmeringsspr√•k. En god vane er √• rett og slett gi dem nye navn, ved f.eks. √• kj√∏re colnames(returns) &lt;- c(&quot;returnA&quot;, &quot;returnB&quot;), eller s√• m√• vi alltid referere til variabelnavnene ved √• bruke slike ‚Äúbackticks‚Äù som vi ser under. Vi kan lage to enkle histogrammer slik vi gjorde det i forelesningen: ggplot(returns, aes(x = `Return A`)) + geom_histogram(bins = 10) ggplot(returns, aes(x = `Return B`)) + geom_histogram(bins = 10) Figur 2.1: To histogrammer "],["utvalg-og-estimering.html", "2.2 Utvalg og estimering", " 2.2 Utvalg og estimering You can, for example, never foretell what any one man will do, but you can say with presicion what an average number will be up to. Individuals vary, but percentages remain constant. So says the statistician. ‚Äî Sherlock Holmes 2.2.1 Videoforelesninger 2.2.2 Kommentarer I videoforelesningene over gikk vi gjennom noen sentrale begreper i statistikk. Noen av dem skal vi bruke mye i fortsettelsen, mens andre er ment for √• gi dere et solid teoretisk fundament n√•r vi etter hvert skal begi oss ut p√• anvendt statistikk. Vi startet med √• sette opp en liten agenda. Som et f√∏rste steg kan du kikke p√•, og notere ned noen setninger til, disse punktene og se om du har f√•tt med deg hva de betyr: Samplingfordelinger Forventning/varians Sentralgrenseteoremet Hva er samplingfordelingen til et gjennomsnitt? Hva er samplingfordelingen til en andel? Forventningsrett Konsistens I Boken er det kapittel 9 (Sampling distributions) og 10 (Introduction to estimation) som gjelder. Kapittel 6-8 omhandler stoff skal skal v√¶re greit dekket i MET2 (Sannsynlighet, fordelinger, stokastiske variable, osv.), men det kan v√¶re nyttig √• skumme gjennom likevel hvis disse begrepene ligger langt bak i bevissheten din. Kapittel 9 starter med √• diskutere samplingfordelingen til et gjennomsnitt. Dette er nyttig lesestoff, men de viktigste punktene er som f√∏lger: Dersom observasjonene \\(X_1, X_2, \\ldots, X_n\\) er normalfordelt, er ogs√• gjennomsnittet \\(\\overline X = \\frac{1}{n}\\sum_{i=1}^n X_i\\) normalfordelt. Dersom E\\((X_i) = \\mu\\) og Var\\((X_i) = \\sigma^2\\) for alle \\(i = 1,\\ldots,n\\), er E\\((\\overline X)=\\mu\\) og Var\\((\\overline X) = \\sigma^2/n\\). Dette regnet vi ut formelt. Dersom \\(n\\) er stor, er \\(\\overline X\\) tiln√¶rmet normalfordelt, uavhengig av fordelingen til den enkelte \\(X_i\\). Dette f√∏lger av sentralgrensesetningen. Dette st√•r i en boks p√• slutten av seksjon 9-1a. Hvor stor m√• \\(n\\) v√¶re for at denne tiln√¶rmingen er god nok? Det finnes ikke et entydig svar p√•, men n√•r vi passerer 50-100 observasjoner kan vi i v√•re MET4-problemer gjerne si at \\(n\\) er ¬´stor nok¬ª. I 9-1b og 9-1c brukes sentralgrenseteoremet til √• regne p√• normalsannsynligheter i MET2-stil. I 9-1d er det noen Excel-instruksjoner som du kan hoppe over hvis du vil. Tekstboksen i 9-2c oppsummerer det vi fant ut om samplingfordelingen til en observert andel. I seksjon 9-3 snakkes det om samplingfordelingen til differansen av to gjennomsnitt. Vi gikk ikke gjennom det eksplisitt i forelesningen, men det er ikke noe substansielt nytt her. Vi skal bruke dette reultatet i neste modul n√•r vi skal sammenligne to gjennomsnitt. I seksjon 9-4 f√•r vi forklart hva vi skal bruke samplingfordelinger til fremover. B√∏r leses. Kapittel 10 omhandler estimering, dvs hvordan vi bruker data til √• ¬´gjette¬ª p√• verdien til en ukjent parameter. Vi fors√∏kte i forelesningen √• gi litt intuisjon til begrepene forventningsrett estimator, variansen til en estimator, og konsistens. Vi kan lage et punktestimat av en forventningsverdi ved √• ta gjennomsnittet av observasjoner, og vi kan lage et konfidensintervall ved √• f√∏lge oppskriften i boksen p√• s. 316 (i 11. utgave). I eksempel 10.1 har vi 25 observasjoner fra en normalfordeling. Oppgaven er √• estimere forventningsverdien med et tilh√∏rende 95% konfidensuntervall. Pass p√• at du forst√•r den manuelle utregningen. I stedet for √• bruke Excel (eller taste alle disse tallene inn p√• en kalkulator) kan du skrive et lite R-script som gj√∏r det samme: # Vi skriver inn datasettet i en vektor demand &lt;- c(235, 374, 309, 499, 253, 421, 361, 514, 462, 369, 394, 439, 348, 344, 330, 261, 374, 302, 466, 535, 386, 316, 296, 332, 334) # Vi trenger 4 verdier for √• regne ut konfidensintervallet: gj.snitt &lt;- mean(demand) # Regner ut gjennomsnittet z &lt;- 1.96 # Denne finner vi i tabellen sigma &lt;- 75 # Oppgitt i oppgaven n &lt;- length(demand) # Antall observasjoner # V√•rt estimat av forventningsverdien er bare gjennomsnittet. # Regner ut nedre og √∏vre grense i konfidensintervallet (LCL, UCL): LCL &lt;- gj.snitt - z*sigma/sqrt(n) UCL &lt;- gj.snitt + z*sigma/sqrt(n) # Samler de tre tallene i en vektor og skriver ut: c(LCL, gj.snitt, UCL) ## [1] 340.76 370.16 399.56 I seksjon 10-2a fors√∏ker boken √• forklare fortolkningen av et konfidensintervall. Hovedpoengene her er at: Et 95%-konfidensintervall skal ikke tolkes som ¬´sannsynligheten for at intervallet inneholder den sanne parameterverdien er 95%¬ª. Den korrekte tolkningen er: ¬´Dersom vi hadde hatt tilgang til √• trekke nye utvalg fra populasjonen med like mange observasjoner og bruker dem til √• regne ut nye konfidensintervaller, vil 95 av 100 intervaller inneholde den sanne parameterverdien¬ª. Forskjellen p√• disse formuleringene er meget subtil, s√• subtil faktisk at det ikke er √•penbart at det er s√¶rlig god pedagogikk √• peke p√• den. Problemet med den f√∏rste formuleringen er at vi der kan f√• inntrykk av at det er den sanne parameterverdien som er stokastisk og avhengig av datasettet vi observerer, mens det strengt tatt er grensene til konfidensintervallet som er tilfeldige, og alts√• avhengige av datasettet. Det kommer klarere frem i den andre formuleringen. Bredden til et konfidensintervall er alts√• et uttrykk for usikkerhet, eller motsatt: presisjon. Seksjon 10-2b og 10-2c kan skummes raskt gjennom. Seksjon 10-3 handler om at vi f√∏rst bestemmer oss for et presisjonsniv√• (dvs bredde p√• konfiensintervallet) \\(B\\), og s√• regner ut hvor mange observasjoner vi trenger for √• oppn√• det. Vi kommer frem til en formelen \\[n = \\left(\\frac{z_{\\alpha/2}\\sigma}{B}\\right)^2,\\] men problemet i praksis er at vi gjerne ikke kjenner \\(\\sigma\\), og vi kan heller ikke estimere den fordi vi ikke har samlet inn data enda. L√∏sningen er at vi enten p√• bruke fornuften, eller eventuelt et tidligere estimat av \\(\\sigma\\) dersom det er tilgjengelig. 2.2.3 Ekstra √∏ving i R Som demonstrert i forelesningen kan vi i R simulere standard normalfordelte observasjoner (dvs normalfordelte observasjoner med \\(\\mu = 0\\) og \\(\\sigma^2 = 1\\)) med kommandoen rnorm(n), der n er antallet observasjoner vi √∏nsker. For eksempel kan vi kj√∏re f√∏lgende kode for √• generere 10 observasjoner (du vil helt sikkert f√• andre verdier): n &lt;- 10 rnorm(n) ## [1] 0.4322066 -0.6296045 1.3353225 -1.6408494 -1.8579580 0.2031752 ## [7] -1.0816665 0.7953656 0.8944543 0.1615232 Ved √• skrive mean(dnorm(n)) i stedet regner vi ut gjennomsnittet av observasjonene direkte. La oss gj√∏re dette 100 ganger og notere ned gjennomsnittet hver gang. I stedet for √• gj√∏re det manuelt, kan vi skrive et lite program som gj√∏r dette for oss ved √• bruke en for-l√∏kke. Det er ikke n√∏dvendig (eller pendum) √• forst√• akkurat hvordan dette fungerer, men dersom du kj√∏rer f√∏lgende linjer vil du f√• en ny vektor gj.snitt som inneholder 100 slike gjennomsnitt: gj.snitt &lt;- rep(NA, 100) for(i in 1:100) { gj.snitt[i] &lt;- mean(rnorm(n)) } Skriv ut denne vektoren og kontroller at det ser korrekt ut. Vi husker at funksjonen sd() regner ut standardavviket til en vektor. Hvilket tall forventer du √• f√• ut dersom du n√• kj√∏rer sd(gj.snitt) i konsollen? Stemmer det? Hint Standardavviket til de enkelte observasjonene er \\(\\sigma = 1\\), og standardavviket til et gjennomsnitt best√•ende av 10 observasjoner er \\(\\sigma/\\sqrt{n} = 1/\\sqrt{10} \\approx 0.32\\). Med andre ord skal det empiriske standardavviket sd(gj.snitt) v√¶re omtrent lik 0.32, pluss/minus en estimeringsfeil. Du kan gjerne regne ut 1000 gjennomsnitt i stedet for 100 ved √• erstatte erstatte 100 med 1000 p√• to steder i koden over. Stemmer det bedre da? Hint gj.snitt &lt;- rep(NA, 1000) # Lager en tom vektor med 1000 plasser for(i in 1:1000) { # Fyller hver plass med et gjennomsnitt av gj.snitt[i] &lt;- mean(rnorm(n)) # 10 standard normalfordelte observasjoner. } Pr√∏v √• forklare. Svar Dette er ganske enkelt, men ogs√• litt vanskelig p√• en inception-aktig m√•te. P√• samme m√•te som at gjennomsnittet blir en mer og mer presis estimator for forventningsverdien n√•r vi √∏ker antall observasjoner (m√•lt ved at standardavviket \\(\\sigma/\\sqrt{n}\\) blir mindre n√•r antall obserasjoner \\(n\\) blir st√∏rre), blir det empiriske standardavviket en mer og mer presis estimator av det sanne standardavviket n√•r vi √∏ker antall observasjoner. Alts√•; det empiriske standardavviket har ogs√• et standardavvik som g√•r mot null som \\(1/\\sqrt{n}\\) üòµ "],["sp√∏rsm√•l-og-oppgaver.html", "2.3 Sp√∏rsm√•l og oppgaver", " 2.3 Sp√∏rsm√•l og oppgaver Kontrollsp√∏rsm√•l Hva er forskjellen p√• deskriptiv statistikk og statistisk inferens? Deskriptiv statistikk kan gj√∏res grafisk eller numerisk, eventuelt som tabeller av ulike numeriske m√•l. Nevn noen fordeler og ulemper man m√• veie mot hverandre n√•r vi skal velge mellom grafisk og numerisk deskriptiv statistikk. Hva er en samplingfordeling? Hva sier sentralgrenseteoremet? Hva mener en statistiker n√•r hen sier at ‚Äúgjennomsnittet konvergerer som \\(1/\\sqrt{n}\\)‚Äù? Hva er samplingfordelingen til et gjennomsnitt? Hva er samplingfordelingen til en andel? Hva vil det si at et estimator er forventningsrett? Hva vil det si at et estimator er konsistent? Drilleoppgaver Ting fra boken, eventuelt litt bearbeidet. Skal vi ogs√• lage til l√∏sning her? Oppgaver p√• (ca) eksamensniv√• (EKS) = F√∏rst og fremst relevant for skoleeksamen. (HEKS) = F√∏rst og fremst relevant for hjemmeeksamen. Finne frem oppgaver fra gamle skoleeksamenssett. Noen av datasettene fra hjemmeeksamen; mange av f√∏rsteoppgavene har v√¶rt av typen ‚ÄúBeskriv relevante deler av datasettet‚Äù. Stargazer for summarytabeller. Summarise fra dplyr? "],["hypotesetesting.html", " 3 Hypotesetesting", " 3 Hypotesetesting Hypotesetesting er et klassisk tema i statistikk. Vi skal f√∏rst l√¶re generelt om hva det egentlig vil si √• teste en hypotese ved hjelp av statistikk, og kanskje like viktig: hva statistisk hypotesetesting ikke er. Vi g√•r s√• videre til √• l√¶re noen vanlige anvendelser og ser hvordan alt dette kan implementeres i R. "],["generelt-om-hypotesetesting.html", "3.1 Generelt om hypotesetesting", " 3.1 Generelt om hypotesetesting 3.1.1 Videoforelesninger 3.1.2 Kommentarer Her snakker vi om kapittel 11 i l√¶reboken. Hvis du kan svare p√• f√∏lgende sp√∏rsm√•l har du i all hovedsak f√•tt med deg de viktigste begrepene: Hva vil det si √• gjennomf√∏re en hypotesetest? Hva er Type I-feil og hva er Type II-feil? (Seksjon 11-1 forklarer dette greit) Hva er signifikansniv√•et (\\(\\alpha\\)) til en test? Styrken (the power) til en test er definert som \\(1-P(\\textrm{Type II-feil})=1-\\beta\\). Hvordan tolker du denne st√∏rrelsen? Se ogs√• 11-3d. Hva er \\(p\\)-verdien til en test (Seksjon 11-2c)? Les ogs√• 11-2d, e og f om hvordan vi fortolker og snakker om \\(p\\)-verdien p√• en korrekt m√•te. Vi kommer tilbake til dette i kapittel 3.2. "],["chap-enpop.html", "3.2 Inferens om en populasjon", " 3.2 Inferens om en populasjon 3.2.1 Videoforelesninger 3.2.2 Kommentarer Dette er i hovedsak dekket av kapittel 12 i l√¶reboken. Sjekk om du kan svare p√• f√∏lgende kontrollsp√∏rsm√•l: Hva er det vi tester n√•r vi gjennomf√∏rer en \\(t\\)-test for √©n populasjon? Hva forutsetter vi? Hva er forskjellen p√• en ensidig og en tosidig test? (11-2j) Det kan ogs√• v√¶re greit √• repetere konfidensintervaller i seksjon 11-2k for de som har glemt det fra MET2. I Seksjon 11-2g g√•r boken gjennom en ett-utvalgs t-test i bokens Excel-plugin. La oss gj√∏re det samme i R. P√• kursets nettside finner du alle datasettene som f√∏lger med l√¶reboken. I dette eksempelet er det snakk om Xm11-01.xlsx. Finn tak i denne filen (du kan ogs√• godt √•pne den og se p√• den i Excel!), legg den i en mappe som du kan finne igjen, og √•pne et nytt script i R-studio der du f√∏rst s√∏rger for √• sette working directory til denne mappen slik vi gjorde i R-forelesningen. Etterp√• leser du inn datasettet ved √• bruke read_xslx()-funksjonen som under: library(readxl) data &lt;- read_xlsx(&quot;Xm11-01.xlsx&quot;) # Vi bruker read_xslx() fordi det er en .xlsx-fil Konteksten til datasettet er gitt i eksempel 11.1. Det er alts√• balansen p√• 400 tilfeldig utvalgte kredittkontoer i en butikk, og en lurer p√• om forventet balanse er st√∏rre enn 170. Vi setter opp f√∏lgende test: \\[\\begin{align*} &amp;H_0: \\mu = 170 \\\\ &amp;H_A: \\mu &gt; 170, \\end{align*}\\] der vi legger merke til at det blir brukt en ensidig test (hvorfor?). For √• regne ut testobservatoren for √• enutvalgs \\(z\\)-test trenger vi fire tall: \\(\\overline X\\), \\(\\mu_0\\), \\(n\\) og \\(\\sigma\\). Legger merke til at data har en kolonne som heter Accounts, og vi bruker dollartegnet til √• hente den ut som en vektor. Regner ut observatoren: gj.snitt &lt;- mean(data$Accounts) # Gjennomsnittet av observasjonene mu0 &lt;- 170 # Henter fra teksten n &lt;- length(data$Accounts) # Antall observasjoner sigma &lt;- 65 # Henter fra teksten Z &lt;- (gj.snitt - mu0)/(sigma/sqrt(n)) # Verdien av testobservatoren Z # Skriver ut testobservatoren ## [1] 2.460462 Vi ser at testobservatoren har samme verdi som i Excel-gjennomgangen. Kritisk verdi finner vi fra tabell (ensidig, 5%), eller rett fra R: qnorm(0.95) ## [1] 1.644854 Uansett; vi forkaster \\(H_0\\) siden testobservatoren er st√∏rre enn kritisk verdi. Kapittel 11-3a-d gir enda mer forst√•else for hypotesetesting. Hopp over e og f om du vil. Kapittel 11-4 snakker litt om hvordan vi skal bruke hypotesetesting videre. Kapittel 12 presenterer de tre testene (ett gjennomsnitt, en varians, en andel) i tur og orden. Det du f√∏rst og fremst m√• kunne fra dette kapitlet er √• gjennomf√∏re disse testene, b√•de for h√•nd med penn og papir, og i R. Under f√∏lger kode for √• gj√∏re noen av bokens eksempler i R (les i boken for kontekst): Eksempel 12.1: \\[\\begin{align*} &amp;H_0: \\mu = 2.0 \\\\ &amp;H_A: \\mu &gt; 2.0, \\end{align*}\\] data &lt;- read_xlsx(&quot;Xm12-01.xlsx&quot;) # Manuell utregning gj.snitt &lt;- mean(data$Newspaper) mu0 &lt;- 2.0 n &lt;- length(data$Newspaper) s &lt;- sd(data$Newspaper) # Testobservator: (gj.snitt - mu0)/(s/sqrt(n)) ## [1] 2.236869 Signifikansniv√•et er satt til \\(\\alpha = 1\\%\\) i eksempelet. Kritisk verdi finner vi i \\(t\\)-tabell eller rett fra R: qt(0.99, df = n-1) ## [1] 2.351983 Alts√• forkaster vi ikke nullhypotesen. Sjekk gjerne verdiene vi regnet ut over og se at de stemmer overens med det som st√•r i boken. Alternativt bruker vi t.test()-funksjonen direkte: t.test(data$Newspaper, alternative = &quot;greater&quot;, mu = 2.0, conf.level = 0.99) ## ## One Sample t-test ## ## data: data$Newspaper ## t = 2.2369, df = 147, p-value = 0.0134 ## alternative hypothesis: true mean is greater than 2 ## 99 percent confidence interval: ## 1.990716 Inf ## sample estimates: ## mean of x ## 2.180405 Resultatet blir selvsagt det samme. N√•r \\(p\\)-verdien er st√∏rre enn signifikansniv√•et p√• 1%, kan vi ikke forkaste nullhypotesen. Eksempel 12.2 handler om √• lage kondidensintervall, noe du ogs√• kan pr√∏ve √• gj√∏re ved √• regne ut de n√∏dvendige tallene i R. De som synes dette er greit kan kikke p√• seksjonene 12-1b-e for √• utvikle forst√•elsen enda litt mer. Eksempel 12.3: \\[\\begin{align*} &amp;H_0: \\sigma^2 = 1.0 \\\\ &amp;H_A: \\sigma^2 &lt; 1.0. \\end{align*}\\] Testobservator: \\[\\chi^2 = \\frac{(n-1)s^2}{\\sigma_0^2}.\\] data &lt;- read_xlsx(&quot;Xm12-03.xlsx&quot;) # Regner ut testobservatoren direkte denne gangen, uten √• lagre tallene underveis: (length(data$Fills) - 1)*var(data$Fills)/1 # Kritisk verdi, 5% niv√•, ensidig test, nedre hale: qchisq(0.05, df = length(data$Fills) - 1) ## [1] 15.2 ## [1] 13.84843 Vi kan alts√• ikke forkaste nullhypotesen. Igjen, les eksempelet i sin fulle lengde i boken for √• forst√• bedre hva som skjer. Figur 12.4 viser p√• en fin m√•te hva tallene betyr. Eksempel 12.5 kan v√¶re grei √• kikke p√• ogs√•. Vi kan selvsagt bruke R som kalkulator og regne ut det vi trenger. Vi skal teste: \\[\\begin{align*} &amp;H_0: p = 0.5 \\\\ &amp;H_A: p &gt; 0.5. \\end{align*}\\] Vi har en observert andel p√• \\(\\widehat p = 407/765 = 0.532\\) etter √• ha spurt \\(n = 765\\) personer. Testobservatoren er \\[Z = \\frac{\\widehat p - p}{\\sqrt{p(1-p)/n}}.\\] p.hatt &lt;- 407/765 p0 &lt;- 0.5 n &lt;- 765 (p.hatt - p0)/sqrt(p0*(1-p0)/n) ## [1] 1.771599 Kritisk verdi for en ensidig z-test p√• 5% niv√• er 1.645 (qnorm(0.95)), og vi kan forkaste nullhypotesen. Seksjonene 12-3d-f b√∏r leses p√• egen h√•nd, mens vi hopper over 12-3g. "],["inferens-om-to-populasjoner.html", "3.3 Inferens om to populasjoner", " 3.3 Inferens om to populasjoner 3.3.1 Videoforelesninger 3.3.2 Kommentarer Vi har g√•tt gjennom kapittel 13, som i all hovedsak handler om √• sammenligne to gjennomsnitt (som vi kan gj√∏re p√• tre forskjellige m√•ter), to varianser og to andeler. Her f√∏lger noen kontrollsp√∏rsm√•l som du kan tenke over, og bruke som utgangspunkt for diskusjon i f.eks. kollokviegrupper: Hva er nullhypotesen n√•r vi skal gjennomf√∏re en t-test for to populasjoner? ‚Ä¶ og hvilke antagelser m√• vi gj√∏re? Hvordan ser testobservatoren ut for en to-utvalgs t-test, og kan du gi en intuitiv forklaring for hvorfor den ser ut som den gj√∏r? N√•r kan vi bruke matchede par, og hva er hensikten? Hvilken testobservator brukes for sammenligning av to varianser, og hvilken fordeling har den under nullhypotesen? Kan du gi en intuitiv forklaring for hvorfor den ser ut som den gj√∏r? Hvilken test brukes for √• teste om to andeler er like, og hva m√• du anta? Videre b√∏r du sjekke at du kan utf√∏re 3 typer \\(t\\)-tester, test for like varianser og test for like andeler b√•de for h√•nd (relevant for skoleeksamen) og i R (relevant til hjemmeeksamen og datalabber). Den enkleste m√•ten √• gj√∏re \\(t\\)-tester i R p√• er √• bruke funksjonen t.test(). Kikk p√• eksempel 13.1 i l√¶rebokens 11. utgave, der vi har observert √•rlige avkastninger til to aksjefond som er kj√∏pt henholdsvis med og uten megler. # Leser inn datasettet funds &lt;- read_xlsx(&quot;Xm13-01.xlsx&quot;) # Ser at det er to kolonner, ¬´Direct¬ª og ¬´Broker¬ª. Alternativhypotesen p√• s.433 spesifiserer at # differansen i forventninger er *st√∏rre* enn null, signifikansniv√•et skal v√¶re 5%. Antar f√∏rst # ulik varians og at vi ikke skal gj√∏re en paret test: t.test(funds$Direct, funds$Broker, alternative = &quot;greater&quot;, paired = FALSE, var.equal = FALSE, conf.level = 0.95) ## ## Welch Two Sample t-test ## ## data: funds$Direct and funds$Broker ## t = 2.2872, df = 97.489, p-value = 0.01217 ## alternative hypothesis: true difference in means is greater than 0 ## 95 percent confidence interval: ## 0.79661 Inf ## sample estimates: ## mean of x mean of y ## 6.6312 3.7232 Du kan s√• sjekke at du f√•r ut de samme tallene p√• s. 434‚Äì435. Videre kan du skrive inn ?t.test i R-konsollen i RStudio for √• lese mer om hvilke argumenter vi kan bruke i t.test()-funksjonen. Der ser vi at argumentene paired, var.equal og conf.level som utgangspunkt allerede er satt til FALSE, FALSE og 0.95 henholdsvis, s√• det hadde vi strengt tatt ikke trengt √• spesifisere i funksjonskallet over. Vi kan enkelt kj√∏re den samme testen under antakelsen om like varianser ved √• sette var.equal = TRUE: # Ser at det er to kolonner, ¬´Direct¬ª og ¬´Broker¬ª. Alternativhypotesen p√• s.433 spesifiserer at # differansen i forventninger er *st√∏rre* enn null, signifikansniv√•et skal v√¶re 5%. Antar f√∏rst # ulik varians og at vi ikke skal gj√∏re en paret test: t.test(funds$Direct, funds$Broker, alternative = &quot;greater&quot;, paired = FALSE, var.equal = TRUE, conf.level = 0.95) ## ## Two Sample t-test ## ## data: funds$Direct and funds$Broker ## t = 2.2872, df = 98, p-value = 0.01217 ## alternative hypothesis: true difference in means is greater than 0 ## 95 percent confidence interval: ## 0.7967156 Inf ## sample estimates: ## mean of x mean of y ## 6.6312 3.7232 Resultatet bli akkurat det samme. Siden testens \\(p\\)-verdi er mindre enn 5%, kan vi forkaste nullhypotesen og sl√• fast at forskjellen i gjennomsnitt er statistisk signifikant. I kapittel 13-3 leser vi om matchede par. Datasettet i eksempel 13.1 har like mange observasjoner i de to populasjonene, s√• vi kan tenke oss at m√•lingene er gjort sekvensielt i tid, slik at vi kan matche dem, og heller se om gjennomsittet av differansene er signifikant forskjellig fra null. Enkelt: # Ser at det er to kolonner, ¬´Direct¬ª og ¬´Broker¬ª. Alternativhypotesen p√• s.433 spesifiserer at # differansen i forventninger er *st√∏rre* enn null, signifikansniv√•et skal v√¶re 5%. Antar f√∏rst # ulik varians og at vi ikke skal gj√∏re en paret test: t.test(funds$Direct, funds$Broker, alternative = &quot;greater&quot;, paired = TRUE, conf.level = 0.95) ## ## Paired t-test ## ## data: funds$Direct and funds$Broker ## t = 2.5178, df = 49, p-value = 0.007563 ## alternative hypothesis: true difference in means is greater than 0 ## 95 percent confidence interval: ## 0.9716497 Inf ## sample estimates: ## mean of the differences ## 2.908 Da ser vi at \\(p\\)-verdien ble enda mindre. I eksemplene 13.4 og 13.5 kan du pr√∏ve selv. Pass p√• at du kan gj√∏re beregningene manuelt ogs√•, der du regner ut gjennomsnitt, testobservator, kritisk verdi osv, slik at du forst√•r hva som foreg√•r. Kapittel 13-2 omhandler forskjellen mellom observasjonsdata og eksperimentelle data. Det er i grunn ganske viktig √• sette seg inn i den forskjellen fordi det ofte har betydning for tolkningen v√•r av statistiske resultater. Det er et eksplisitt krav for √• lykkes i MET4 at du er i stand til √• sette resultatene inn i en fornuftig kontekst. I kapittel 13-4 kan vi lese om varianstesten. Eksempel 13.7 ser slik ut i R: bottle &lt;- read_xlsx(&quot;Xm13-07.xlsx&quot;) var.test(bottle$`Machine 1`, bottle$`Machine 2`, alternative = &quot;greater&quot;) ## ## F test to compare two variances ## ## data: bottle$`Machine 1` and bottle$`Machine 2` ## F = 1.3988, num df = 24, denom df = 24, p-value = 0.2085 ## alternative hypothesis: true ratio of variances is greater than 1 ## 95 percent confidence interval: ## 0.7051295 Inf ## sample estimates: ## ratio of variances ## 1.398807 Ogs√• her kan du sammenligne med tallene som fremg√•r av bokens gjennomgang, og s√∏rg for at du f√•r til dette p√• egen h√•nd, spesielt det √• finne frem i tabellen, for det m√• du kunne p√• eksamen. Til slutt har vi test for to andeler i kapittel 13-5. De setter opp to varianter, en der vi sjekker om differansen mellom to andeler er like (\\(p_1 - p_2 = 0\\)), som er det vi har dett p√• i forelesning, men det g√•r selvsagt like fint √• sette opp en nullhypotese der differansen mellom andelene er lik et bestemt tall \\(D\\). Det finnes ingen ferdig prosedyre for denne testen i R, men vi kan sette den opp likevel ved √• regne ut testobservatoren fra datasettet. Vi ser p√• eksempel 13.9, der vi f√•r oppgitt salget av en del forskjellige varenummer, og vi √∏nsker √• finne ut om andelen ¬´9077¬ª er st√∏rre i Supermarked 1 enn i Supermarked 2: # Laster inn data. Her er det to utvalg med forskjellig antall observasjoner, s√• jeg # velger √• lese inn de to kolonnene hver for seg: soap1 &lt;- read_xlsx(&quot;Xm13-09.xlsx&quot;, range = cell_cols(&quot;A&quot;)) soap2 &lt;- read_xlsx(&quot;Xm13-09.xlsx&quot;, range = cell_cols(&quot;B&quot;)) # Hvor stor andel utgj√∏r ¬´9077¬ª i de to kolonnene? p1 &lt;- mean(soap1 == 9077) p2 &lt;- mean(soap2 == 9077) # De to utvalgsst√∏rrelsene: n1 &lt;- nrow(soap1) n2 &lt;- nrow(soap2) # Felles estimat for p under nullhypotesen: p &lt;- (n1*p1 + n2*p2)/(n1 + n2) # Testobservatoren: z &lt;- (p1 - p2)/sqrt(p * (1-p)*(1/n1 + 1/n2)) # Kritisk verdi p√• 5% niv√• for en ensidig test: qnorm(0.95) ## [1] 1.644854 Siden \\(z = 2.9\\) forkaster vi nullhypotesen om at det er lik andel ¬´9077¬ª i de to populasjonene. "],["kjikvadrattester.html", "3.4 Kjikvadrattester", " 3.4 Kjikvadrattester 3.4.1 Videoforelesninger 3.4.2 Kommentarer Vi m√• kunne to anvendelser av kjikvadrattester, der hver av de har sitt eget delkapittel i boken: Teste for om en gitt fordeling passer med obervasjoner (‚ÄúGoodness-of-fit‚Äù). Teste for uavhengighet. I den f√∏rste anvendelsen f√•r vi oppgitt en diskret sannsynlighetsfordeling der vi har noen mulige utfall \\(u_1, \\ldots, u_k\\), med tilh√∏rende sannsynligheter \\(p_1, \\ldots,p_k\\). Dersom vi skal observere \\(n\\) utfall fra denne fordelingen, vil vi forvente \\(e_i = p_i\\cdot n\\) observasjoner av utfall \\(u_i\\). N√• har det seg slik at vi har observert \\(n\\) utfall fra fordelingen, og utfall \\(u_i\\) har skjedd \\(f_i\\) ganger. Vi lurer da p√• om de observerte frekvensene (\\(f_i\\)) er s√• forskjellige fra de forventede frekvensene (\\(e_i\\)) at vi ikke lenger tror at \\(p_1, \\ldots,p_k\\) er den sanne sannsynlighetsfordelingen. Vi kom frem til en fornuftig testobservator: \\[\\chi^2 = \\sum_{i=1}^k \\frac{(f_i - e_i)^2}{e_i},\\] som er \\(\\chi^2\\)-fordelt med \\(k-1\\) frihetsgrader dersom nullhypotesen er sann. Det betyr at vi kan g√• inn i \\(\\chi^2\\)-tabellen for √• sjekke om verdien av testobservatoren er for stor (dvs, \\(f\\)¬¥ene er for forskjellige fra \\(e\\)`ene) at vi ikke lenger tror at \\((p_1, \\ldots, p_k)\\) er den sanne sannsynlighetsfordelingen. Vi gjorde eksempelet i dette delkapitlet i forelesningen, og brukte f√∏lgende kommandoer: p0 &lt;- c(0.45, 0.40, 0.15) # Fordeling under H0 f &lt;- c(102, 82, 16) # Observerte frekvenser chisq.test(x = f, p = p0) ## ## Chi-squared test for given probabilities ## ## data: f ## X-squared = 8.1833, df = 2, p-value = 0.01671 Den andre anvendelsen er √• teste for om to kjennetegn opptrer uavhengig av hverandre. Ideen er den samme som over, fordi vi kan skrive sannsunligheten for ¬´\\(A\\) og \\(B\\)¬ª som et produkt dersom de ar uavhengige: \\[P(A \\cap B) = P(A)\\cdot P(B).\\] Vi kan regne ut hvor mange observasjoner vi forventer √• se for hver kombinasjon av de to kjennetegnene (\\(e_{ij}\\)), og bruke kjikvadrattesten over til √• sjekke om disse er langt fra det vi faktisk har observert (\\(f_{ij}\\)). Boken har et eksempel p√• dette som de regner ut b√•de for h√•nd og i Excel. Slik kan vi gj√∏re det i R: # Leser inn data mba &lt;- read_xlsx(&quot;Xm15-02.xlsx&quot;) # Kikker p√• datasettet mba ## # A tibble: 152 x 2 ## Degree `MBA Major` ## &lt;dbl&gt; &lt;dbl&gt; ## 1 3 1 ## 2 1 1 ## 3 1 1 ## 4 1 1 ## 5 2 2 ## 6 1 3 ## 7 3 1 ## 8 1 1 ## 9 2 1 ## 10 2 2 ## # ‚Ä¶ with 142 more rows Vi legger merke til at strukturen p√• datasettet er litt annerledes enn krysstabellen som er vist s. 601 i l√¶reboken. I stedet for at vi har telt opp antall studenter i hver enkelt kominasjon av ¬´bachelorgrad¬ª og ¬´masterprofil¬ª, har vi f√•tt oppgitt en tabell der hver rad representerer en enkeltstudents fagkombinasjon. Vi kan dog enkelt lage en krysstabell i R: table(mba) ## MBA Major ## Degree 1 2 3 ## 1 31 13 16 ## 2 8 16 7 ## 3 12 10 17 ## 4 10 5 7 Det er denne som brukes som argument i chisq.test(): chisq.test(table(mba)) ## ## Pearson&#39;s Chi-squared test ## ## data: table(mba) ## X-squared = 14.702, df = 6, p-value = 0.02271 Her er det bare √• sammenligne tallene med det som l√¶reboken finner i Excel. Noen kontrollsp√∏rsm√•l: Vi har l√¶rt to veldig spesifikke anvendelser av kjikvadrattester. Hvilke? Kan du gi en intuitiv forklaring p√• hvorfor testobservatoren v√•r er fornuftig? Litt mer vanskelig: Kan du gi en intuitiv forklaring for hvorfor testobservatoren er tiln√¶rmet kjikvadratfordelt? "],["regresjon.html", " 4 Regresjon", " 4 Regresjon "],["avansert-regresjon-og-maskinl√¶ring.html", " 5 Avansert regresjon og maskinl√¶ring", " 5 Avansert regresjon og maskinl√¶ring "],["tidsrekker.html", " 6 Tidsrekker", " 6 Tidsrekker "],["data√∏vinger.html", " 7 Data√∏vinger", " 7 Data√∏vinger Blabla intro til √∏vinger "],["data√∏ving-1.html", "7.1 Data√∏ving 1", " 7.1 Data√∏ving 1 7.1.1 Innledning Velkommen til den f√∏rste data√∏velsen i MET4. I denne √∏velsen skal vi bli litt kjent med verkt√∏yene R og Rstudio som brukes i datalabbene. Disse verkt√∏yene er ogs√• essensielle for gjennomf√∏ringen av den obligatoriske innleveringen og p√• hjemmeksamen. Den f√∏rste delen av √∏vingen inneholder praktisk informasjon om bruk av R og Rstudio etterf√∏lgt av oppgaver. 7.1.2 Om R og Rstudio R er et program/programmeringsspr√•k som er spesialdesignet til √• utf√∏re statistiske analyser. R er basert p√• at du m√• skrive forskjellige kommandoer for √• utf√∏re utregninger og analyser. Gjennomsnittet av 3, 2 og 5 finner man for eksempel ved √• skrive: mean(c(3,2,5)) Dette kan for mange v√¶re litt uvant i starten, men datalabbene vil gi deg god trening p√• denne type tankegang. Rstudio er et program som gj√∏r det enklere √• bruke R. P√• samme m√•te som Word kan hjelpe deg til √• lage fine og oversiktlige tekster, kan Rstudio hjelpe deg til √• utf√∏re fine og oversiktlige statistiske analyser. Rstudio er et redigeringsprogram som vi i dette kurset skal bruke til √• redigere og utf√∏re R-kommandoer. 7.1.2.1 Installere R og Rstudio Bruker du din egen datamaskin kan du enkelt laste ned og installere R og Rstudio. Begge programvarene er gratis og kan installeres med √• f√∏lge instruksene under. F√•r du problemer kan du f√• en av studentassistentene til √• hjelpe deg. Start med √• installere R: G√• til r-project.org Last ned versjonen som passer ditt operativsystem (Windows/Mac/Linux) Kj√∏r installasjonsfilen og f√∏lg instruksene. Standard innstillingene skal v√¶re greie √• bruke, s√• du kan trykke neste/ok til installasjonen er ferdig. Installer s√• RStudio: rstudio.com, og naviger deg frem til siden for RStudio. Du skal der laste ned desktop-versjonen av programmet (‚ÄúOpen source edition‚Äù) for ditt operativsystem og installere p√• vanlig m√•te. Kj√∏r installasjonsfilen som lastes ned og f√∏lg instruksene 7.1.2.2 Vinduene i Rstudio og det √• jobbe med R F√∏rste gang du √•pner Rstudio vil du se tre vinduer. Et fjerde vindu √•pner du med √• klikke p√• File i menyen, s√• New File, og s√• R Script. Figur 7.1 viser en oversikt over de fire vinduene. Det er viktig at du forst√•r forskjellen p√• de to vinduene til venstre. Figur 7.1: Oversikt over vinduene i RStudio. Nederste vindu til venstre (b) viser R-konsollen og det er her alle utregninger blir gjennomf√∏rt. I dette vinduet kan du for eksempel skrive (3*5 - 3/4)*(2 + 2) ## [1] 57 Her er \\((3*5 - 3/4)*(2 + 2)\\) en s√•kalt kommando og det er programmet R som finner ut hva du mener med kommandoen og gir deg svaret \\(57\\) i retur. Du kan se at R tillater standard matteoperasjoner som gange, deling, pluss og minus (*, /, +, -). R er det vi kaller ‚Äòobjektbasert‚Äô, som betyr at du kan definere ‚Äòobjekter‚Äô. Utregningen over kan for eksempel ogs√• regnes ut ved √• skrive: a &lt;- 3*5 - 3/4 b &lt;- 2 + 2 a*b ## [1] 57 Her er a og b objekter som vi definerer ved bruk av ‚Äòtildelingspilen‚Äô &lt;- (du kan ogs√• bruke =). Det g√•r an √• lagre objekter i egne filer, men vi skal se at det stort sett er smartere √• lagre ‚Äòoppskriften‚Äô (selve koden) p√• hvordan de lages i en egen .R fil. Det √∏verste vinduet til venstre (a) viser en .R fil (et skript). En .R fil fungerer som et manuskript med R-kommandoer (kode) og kan lagres slik at du kan senere kan se hvilke kommandoer du har brukt i analysen og eventuelt fortsette der du slapp. I Del 2 av denne data√∏vingen skal du selv lage en .R fil som inneholder alle kommandoer som brukes i en enkel analyse. N√•r du vil at R skal utf√∏re noen av kommandoene du har skrevet i .R filen markerer du bare disse (eller lar pekeren st√• i linjen du vil kj√∏re) og trykker ctrl + Enter (Cmd + Enter p√• Mac): Figur 7.2: Utf√∏relse av kommandoer du har skrevet i R filen. Marker eller la pekeren st√• i linjen du vil kj√∏re og trykk ctrl + Enter (Cmd + Enter p√• Mac) Vinduet nederst til h√∏yre (d) vil vise blant annet figurer du lager og hjelpetekst. Vinduet √∏verst til h√∏yre (c) gir deg en oversikt over hvilke objekter du har laget og er spesielt nyttig hvis du vil ta en n√¶rmere titt p√• et datasett du har lest inn. Vinduet nederst til h√∏yre (d) vil vise blant annet figurer du lager og hjelpetekst. Vinduet √∏verst til h√∏yre (c) gir deg en oversikt over hvilke objekter du har laget og er spesielt nyttig hvis du vil ta en n√¶rmere titt p√• et datasett du har lest inn. Det er viktig at du forst√•r forskjellen p√• de to vinduene til venstre, alts√• .R filen og konsollen. R kode du √∏nsker √• ta vare p√• og som er en essensiell del av analysen skriver og lagrer du i .R filen, mens sm√• eksperimenter og unders√∏kelser kan du gjerne gj√∏re direkte i konsollen. For de av dere som er glad i hurtigtaster finnes det en oversikt i Rstudio som kommer opp dersom du trykker Alt + Shift + K (Option + Shift + K p√• Mac). Ofte vil man f.eks m√•tte skifte musepeker fra R-filen til konsoll og motsatt, og hurtigtaster for √• veksle mellom disse er Ctrl + 1 (R-fil) og Ctrl + 2 (konsoll). Hurtigtasten du kommer til √• bruke desidert mest er ctrl + Enter for √• kj√∏re kode fra R-skriptet ditt i konsollen (P√• Mac erstatter du ctrl med command over alt). 7.1.2.3 Funksjoner, dokumentasjon og R-pakker I R kan man lage egne funksjoner som utf√∏rer det en m√•tte √∏nske, f.eks en funksjon som regner ut t-observatoren gitt en vektor med observasjoner x og en gitt \\(\\mu_0\\): t.observator &lt;- function(x, mu0){ t &lt;- (mean(x) - mu0)/(sd(x)/sqrt(length(x))) return(t) } R kommer med en rekke ‚Äúinnebygde‚Äù funksjoner som kan utf√∏re ulike statistiske analyser. For eksempel kan en t-test utf√∏res med √• bruke en funksjon som heter nettopp t.test. Alle slike funksjoner kommer med en dokumentasjon som viser hva funksjonen gj√∏r og hvordan den skal brukes. For √• tilgang til denne dokumentasjonen skriver man ? foran funksjonen i konsollen. Skriver du f.eks ?t.test ser du at det dukker opp en side i vinduet nede til h√∏yre: Figur 7.3: Dokumentasjon av funksjoner dukker opp i et vindu nede til h√∏yre. Dette vinduet kan √•pnes til et st√∏rre vindu som vist over Dokumentasjonen vil som hovedregel inneholder en kort beskrivelse av hva funksjonen gj√∏r, hvilke argumenter funksjonen tar og hva den gir ut. Helt i slutten av dokumentasjonen er det ofte et eksempel p√• hvordan funksjonen kan brukes og er ofte sv√¶rt nyttig √• se p√•. Selv om det finnes mange funksjoner som allerede er innebygget i R, m√• man noen ganger installere ekstra ‚Äòpakker‚Äô for √• f√• tilgang til spesielle funksjoner. I oppgave 2.2 i denne √∏velsen vil vi g√• gjennom hvordan dette gj√∏res for en bestemt pakke. 7.1.2.4 Skriv pen R-kode! Det er viktig at R-koden du skriver er veldokumentert og skrevet p√• en oversiktlig og pen m√•te. Hvis vi √∏nsker √• skrive kommentarer til koder som st√•r i .R filen bruker vi tegnet # foran kommentaren. Dette gj√∏r at R ikke pr√∏ver √• evaluere kommentaren som en R-kode. Det finnes en rekke konvensjoner n√•r det kommer til mellomrom, linjeskift, navngivning av objekter og lignende. Vi anbefaler tipsene som er oppsummert p√• (http://adv-r.had.co.nz/Style.html)[http://adv-r.had.co.nz/Style.html], men det er selvsagt lov √• ha sine egne preferanser. Under ser du et eksempel p√• d√•rlig praksis ved R-koding. Her er det manglende dokumentasjon, d√•rlig navngivning og ingen ‚Äòluft‚Äô i form av mellomrom og linjeskift. Dette gj√∏r at du eller andre vil m√•tte bruke un√∏dvendig tid p√• √• finne ut hva koden faktisk gj√∏r p√• et senere tidspunkt. # D√•rlig praksis: library(readxl) library(tidyverse) d&lt;-readxl(file=&quot;financedata.xlsx&quot;,sheetIndex = 1) %&gt;% na.omit() √ò95&lt;-mean(d$value)-qt(0.975,df=length(d$value)-1)*sd(d$value) N95&lt;-mean(d$value)+qt(0.975,df=length(d$value)-1)*sd(d$value) F√∏lgende R kode gir det samme resultatet men er mye mer oversiktlig siden den er mer luftig, er brutt ned i biter, er godt dokumentert og har fornuftige objektnavn: # God praksis: # ---------- Analyse av data # N√∏dvendige pakker i analysen library(readxl) library(tidyverse) # Les data, fjern NA-verdier og hent ut gjeld my_data &lt;- readxl(file = &quot;financedata.xlsx&quot;, sheetIndex = 1) %&gt;% na.omit() debt &lt;- my_data$debt # Konfidensintervall n_obs &lt;- length(debt) # antall observasjoner alpha &lt;- 0.05 # signifikansniv√• average &lt;- mean(debt) # gjennomsnitt st_dev &lt;- sd(debt) # standardavvik lower &lt;- average - qt(1 - alpha/2, df = n_obs - 1)*st_dev/sqrt(n) # nedre grense upper &lt;- average + qt(1 - alpha/2, df = n_obs - 1)*st_dev/sqrt(n) # √∏vre grense Vi oppfordrer deg til √• pr√∏ve √• skrive R-kode som er pen og oversiktlig i datalabbene fremover. D√•rlige vaner kan v√¶re vonde √• vende! 7.1.3 Oppgaver til √∏vingen 7.1.3.1 Oppgave 1: Interaktiv √∏velse Her skal du bruke et l√¶ringsverkt√∏y kalt swirl som vil ta deg gjennom en interaktive √∏velse hvor du m√• utf√∏re forskjellige oppgaver i konsollen. I flere av data√∏vingene vil det v√¶re en slik interaktiv del. Her er tanken at du skal leke deg litt med R. F√∏r du kan begynne m√• du installere swirl. Kopier derfor f√∏lgende tre linjer og lim dem inn i R-konsollen: install.packages(&quot;swirl&quot;) library(swirl) install_course(&quot;R Programming&quot;) For √• starte swirl skriver du s√• f√∏lgende i konsollen: swirl() Du vil i starten bli bedt om √• skrive inn ditt navn og s√• f√∏lger litt info om hvordan swirl fungerer. Du blir s√• bedt om √• velge kurs. Her skal du velge alternativet ‚ÄòR Programming‚Äô (1 og s√• enter). Du f√•r s√• se alle modulene dette kurset inneholder: I denne √∏vingen skal du pr√∏ve deg p√• modul 1 ‚ÄòBasic Building Blocks‚Äô, modul 4 ‚ÄòVectors‚Äô (kun f√∏rste halvdel), og modul 12 ‚ÄòLooking at Data‚Äô. I modul 1 vil du l√¶re litt om de mest grunnleggende operasjonene som kan gj√∏res i R. Modul 4 ser n√¶rmere p√• vektorer og her er f√∏rste halvdel av modulen mest relevant. Modul 12 tar for seg det √• utforske strukturen p√• et datasett. Start med modul 1 (1 og s√• enter). Du vil bli bedt om √• gj√∏re enkle operasjoner i R og av og til m√• du svare p√• multiple choice sp√∏rsm√•l: Merk at det helt til h√∏yre vil st√•r hvor langt du har kommet i prosent. St√•r du helt fast med et punkt kan du skrive skip() for √• hoppe over dette punktet. N√•r du har fullf√∏rt en modul blir du spurt om du vil motta ‚Äòcredit‚Äô for √• ha fullf√∏rt modulen. Her kan du svare nei. √ònsker du √• avbryte underveis skriver du bye(). Skriver du inn det samme navnet n√•r du eventuelt starter swirl igjen kan du fortsette der du slapp. Husk √• avslutt swirl (esc) f√∏r du begynner p√• del to av √∏vingen. Lykke til! 7.1.3.2 Oppgave 2: Innlesning av data og deskriptiv statistikk i R I denne oppgaven skal vi lese inn noen data og produsere enkel deskriptiv statistikk av disse dataene. Dataene kommer fra et amerikansk fors√∏k hvor man ville unders√∏ke p√•standen om at voldelige dataspill f√∏rer til voldelig adferd ved la to grupper spille hvert sitt dataspill. I det ‚Äúvoldelige‚Äù dataspillet var oppdraget √• skyte og drepe et romvesen, mens i den ikke-voldelige varianten skulle man finne og redde romvesenet fra fare. Utover det var spillene helt likt utformet, og i etterkant av en spille√∏kt ble deltakernes aggresjonsniv√• m√•lt p√• en skala fra 1 til 9 ved hjelp av en standard psykologisk test. Dette datasettet ble brukt i eksamensoppgaven v√•rsemesteret 2019. Oppgave 2.1 Last ned filen violence.xslx. Denne filen lagrer du fortrinnsvis i en egen mappe der du √∏nsker at filer fra denne √∏vingen skal ligge. √Öpne s√• RStudio, velg File -&gt; New File -&gt; R Script for √• √•pne et nytt Rscript. Lagre s√• scriptet ditt i samme mappen som du har lagt datasettet, slik at du n√• har en mappe som ser ut som figuren under: N√•r vi skal lese inn data, lagre figurer og andre ting har R en standard ‚Äòmappesti‚Äô (working directory) den leter/lagrer i. Du kan se hva denne stien peker p√• ved √• skrive i konsollen. Du skal n√• spesifisere denne mappestien til mappen du har opprettet. Dette gj√∏r du raskest ved √• velge Session -&gt; Set Working Directory -&gt; To Source File Location. Neste gang du skal jobbe med dette prosjektet kan du √•pne RStudio ved √• dobbeltklikke p√• data√∏ving1.R, og mappestien skal da settes automatisk til riktig mappe. Lag gjerne en liten overskrift ved hjelp av kommentartegnet # slik at .R filen din ser omtrent slik ut: Oppgave 2.2 Du skal n√• lese inn excel filen du lagret i over i R. Selv om det finnes mange funksjoner som allerede er innebygget i R, m√• man noen ganger installere ekstra ‚Äòpakker‚Äô for √• f√• tilgang til spesielle funksjoner. For √• lese inn en excel fil trenger du nettopp en slik ikke standard funksjon. Denne finnes i pakken readxl. Selve installeringen kan du gj√∏re direkte i konsollen med √• skrive (hvis du ikke har gjort det allerede): install.packages(&quot;readxl&quot;) Pakken legger seg da i en bibliotekmappe der R er installert. For √• gi R beskjed om √• laste inn funksjonene til pakken du nettopp installerte bruker du funksjonen library. Du har n√• tilgang til en funksjon kalt read_excel() som du kan bruke til √• lese inn excel filen: # MET4 - Data√∏ving 1 # ------------------ # les inn data library(readxl) violence &lt;- read_excel(&quot;violence.xlsx&quot;) Marker linjene du nettopp skrev i R-skriptet ditt og trykk ctrl + enter (cmd + enter), for √• opprette objektet violence som inneholder datasettet. Funksjonen ls lister opp alle objekter som har blitt definert. Du kan pr√∏ve selv √• skrive f√∏lgende i konsollen: ls() ## [1] &quot;violence&quot; Du ser at det har kommet et nytt objekt som heter violence. En tilsvarende oversikt finner du i vinduet √∏verst til h√∏yre i Rstudio (se Figur 7.1) hvor du ogs√• kan klikke p√• objektet for √• se n√¶rmere p√• det. Oppgave 2.3 Ta en titt p√• strukturen til datasettet du nettopp leste inn. Husker du kanskje noe fra den interaktive √∏velsen ‚ÄòLooking at Data‚Äô? N√•r du gj√∏r slike sm√• utforskninger kan du gjerne jobbe direkte i konsollen, og det du gj√∏r i dette punktet trenger n√∏dvendigvis ikke v√¶re med i .R-filen din. G√• til konsollen og bruk funksjoner som class, dim, names, head og str for √• utforske strukturen p√• dataene. Vi ser at det er 5 variabler: id er bare et tall som identifiserer fors√∏kspersonen. aggression_level er aggresjonsniv√•et som ble m√•lt rett etter at fors√∏kspersonen hadde spilt en viss tid. violent_treatment er varianten av dataspillet som fors√∏kspersonen ble utsatt for; enten Violent eller Less Violent. difficulty_treatment er vanskelighetsgraden av spillet, som enten var Easy eller Hard. En mulig forklaring p√• aggressiv adferd er at vanskelige spill f√∏rer til h√∏yere stressniv√•, som igjen kan f√∏re til aggressivitet. experienced_violence er svaret til fors√∏kspersonen p√• sp√∏rsm√•let om vedkommende oppfattet spillet som Violent eller Less Violent. Fors√∏kspersonene visste ikke selv hva forss√∏ket gikk ut p√•, eller at det var flere varianter av det samme spillet. Oppgave 2.4 Vi skal se n√¶rmere p√• om aggresjonsniv√•et er forskjellig i de to gruppene. Da m√• vi trekke ut de aktuelle tallene fra datasettet. Vi √∏nsker √• velge ut to vektorer for √• gj√∏re denne sammenligningen: en vektor som inneholder aggresjonsniv√•et til gruppen som har spilt det voldelige dataspillet, og en vektor som inneholder aggresjonsniv√•et til gruppen som har spilt det ikke-voldelige dataspillet. La disse to vektorene f√• navn voldelig og ikke_voldelig, og lag dem ved √• skrive f√∏lgende kodelinjer: # Vektorer med aggresjonsniv√• til gruppen som har spilt voldelig/ikke-voldelig spill voldelig &lt;- violence$aggression_level[violence$violent_treatment == &quot;Violent&quot;] ikke_voldelig &lt;- violence$aggression_level[violence$violent_treatment == &quot;Less Violent&quot;] Sjekk n√• at dette har fungert ved √• skrive voldelig og ikke_voldelig inn i konsollen for √• se at det faktisk er vektorer som inneholder tallene 1 ‚Äì 9. Bruk ogs√• noen minutter til √• pr√∏ve √• forst√• hva kodelinjene over faktisk gj√∏r. Her er noen punkter som kan hjelpe til med √• obdusere den f√∏rste linjen: violence$aggression_level henter ut kolonnen aggression_level fra datasettet violence. Vi kan bruke firkantparantes [ ] til √• hente ut spesifikke elementer fra en vektor. Her skal vi hente ut bestemte elementer fra vektoren violence$aggression_level, og vi kan for eksempel skrive violence$aggression_level[1], violence$aggression_level[1:10] eller violence$aggression_level[c(1, 5)] for √• hente ut henholdsvis det f√∏rste, de ti f√∏rste, eller det f√∏rste og det femte tallet i vektoren. (Pr√∏v!) Vi skal hente ut noen helt bestemte tall fra violence$aggression, nemlig de m√•lingene som tilh√∏rer testpersonene som har violent_treatment lik &quot;Violent&quot;. Alle disse kan vi finne ved √• skrive inn violence$violent_treatment == &quot;Violent&quot;. Pr√∏v det. Du vil da f√• ut en vektor fylt med enten TRUE eller FALSE, alt etter om den tilh√∏rende fors√∏kspersonen har violent_treatment lik Violent eller ikke. Denne vektoren kan vi bruke til √• hente ut tall som svarer til TRUE fra violence$aggression_level ved √• putte den i firkantparanteser. Det er det som st√•r til h√∏yre for tilordningen &lt;-. Til slutt lagrer vi resultatet i vektoren voldelig. (NB! Pass p√• at du skriver Violent og Less Violent helt riktig med store og sm√• bokstaver, ellers vil det ikke fungere!) Oppgave 2.5 I eksamensoppgaven fra 2019 f√•r vi oppgitt deskriptiv statistikk over aggresjonsniv√•et for de to gruppene i f√∏lgende tabell: Bruk funksjoner som min(), max(), median(), mean(), length() og summary() til √• finne ut om tallene stemmer. Hvordan kan det ha seg at tallene ikke er identiske? Oppgave 2.6 Vi skal n√• lage et histogram av hver av gruppene du lagret som vektorer i tidligere, og vi skal gj√∏re det p√• to m√•ter: F√∏rst skal vi bruke plottefunksjonene som f√∏lger med R (‚ÄúBase R‚Äù). S√• skal vi gj√∏re det samme ved hjelp av ggplot-pakken. Vi skal f√∏rst bruke funksjonen hist() som alts√• f√∏lger med R-installasjonen din. De fleste R-funksjoner har flere argumenter slik de kan utf√∏re forskjellige operasjoner. Om vi for eksempel √∏nsker at histogrammet skal vise andel og ikke frekvens, m√• vi angi dette i ett av argumentene. For √• ta en titt p√• hvilke argument hist() har √• tilby skriver ?hist i konsollen. Det vil da poppe opp en dokumentasjonside i vinduet nede til h√∏yre. Skroll ned √• les om argumentet ‚Äòfreq‚Äô. Hva skal du erstatte sp√∏rsm√•lstegnene under med for at histogrammene skal vise andel? # Skalert Histogram, vi velger breaks = 9 fordi det er 9 mulige utfall: 1 -- 9. hist(voldelig, freq = ?, breaks = 9, main = &quot;Voldelig&quot;) hist(ikke_voldelig, freq = ?, breaks = 9, main = &quot;Ikke-voldelig&quot;) De fullf√∏rte linjene over skal v√¶re med i .R-filen din. For √• se histogrammene kan du kj√∏re kommandoene en etter en i konsoll med √• trykke ctrl + enter. Figurene dukker da opp i vinduet nede til h√∏yre. Du kan ogs√• pr√∏ve √• eksperimentere med argumentet breaks. La oss s√• fors√∏ke √• gjenta denne operasjonen ved √• bruke ggplot-pakken. Vi kan f√∏rst kikke p√• Figur 2.1 og koden som lagde disse figurene for √• f√• en id√© om hva vi m√• gj√∏re. Et sv√¶rt viktig punkt er f√∏gende: ggplot-funksjonen skal alltid ha hele datasettet (en data frame) som argument!! Det betyr at vi ikke skal bruke de to vektorene voldelig og ikke_voldelig, slik som i hist()-funksjonen, men bruke hele datasettet violence. Vi ser av oversikten over at variabelen som inneholder aggresjonsniv√•et er aggression_level, s√• det er den vi skal bruke som \\(x\\)-argument. Ved √• ta utganspunkt i koden som lagde Figur 2.1, kan vi gj√∏re et f√∏rste fors√∏k (der vi husker √• laste inn ggplot2-pakken f√∏rst): library(ggplot2) ggplot(violence, aes(x = aggression_level)) + geom_histogram(bins = 9) Nesten! Det eneste problemet er at vi har ett histogram for alle observasjonene, mens det vi egebntlig √∏nsket var √• lage et histogram for hver av gruppene. Dette er s√•re enkelt i ggplot2. Det eneste vi trenger √• gj√∏re er √• identifisere den variabelen i datasettet som angir gruppetilh√∏righet (sjekk variabeloversikten over, svaret er experienced_violence), og s√• plusse p√• en funksjon som heter facet_wrap() som vist under. ggplot(violence, aes(x = aggression_level)) + geom_histogram(bins = 9) + facet_wrap(~ experienced_violence) Dersom vi i stedet √∏nsker et skalert histogram kan vi spesifisere y-argumentet p√• f√∏lgende vis: ggplot(violence, aes(x = aggression_level, y = ..density.. )) + geom_histogram(bins = 9) + facet_wrap(~ experienced_violence) Oppgave 2.7 N√•r man skal sammenligne sentrum og spredning i to grupper er et boxplott et ypperlig alternativ og vi kan da bruke funksjonen boxplot() i ‚Äúbase R‚Äù, eller funksjonen geom_boxplot() hvis vi heller √∏nsker √• benytte ggplot2. Vi holder oss til det siste alternativet her, og ser at kodelinjene ligner p√• det vi laget over. Dersom vi √∏nsker √• lage et enkelt boxplot av en variabel for √• sammenligne spredingen i to eller flere grupper kan vi skrive ggplot(a, aes(x = b, y = c)) + geom_boxplot() Her m√• du selv erstatte bokstavene a, b og c i henhold til f√∏lgende regel: a er navnet p√• datasettet. b er variabelen som inneholder gruppeinndelingen. c er variabelen som inneholder m√•lingene. De ferdige kodelinjene skal v√¶re med i .R-skriptet ditt. For √• se boxplottet kan du som vanlig kj√∏re kommandoene med √• trykke ctrl + enter. Ser det ut til √• v√¶re noe forskjell p√• sentrum og spredning i de to gruppene? Bonusoppgave Bytt ut geom_boxplot() over med geom_jitter() og geom_violin(). Hva viser disse plottene? "]]
